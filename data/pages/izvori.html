<!-- pages/izvori.html -->
<h1 class="text-3xl font-bold text-white inline-block px-4 py-2 rounded accent-bg mb-6">
  Izvori i reference
</h1>

<section class="bg-white rounded-xl shadow p-6 mb-8" id="refs-global">
  <h2 class="text-xl font-semibold mb-3">Globalni izvori</h2>
  <div class="content"></div>
</section>

<section class="bg-white rounded-xl shadow p-6" id="refs-by-m">
  <h2 class="text-xl font-semibold mb-3">Izvori po manastirima</h2>
  <p class="text-gray-600 mb-4">
    Ovo su posebne reference koje koristimo pri pisanju tekstova o pojedinačnim manastirima.
  </p>
  <div class="content"></div>
</section>

<section class="mt-10 text-sm text-gray-600">
  <h2 class="text-base font-semibold mb-2">Napomena o autorskim pravima</h2>
  <p>
    Tekstovi na ovom sajtu nastaju kao autorski sadržaj na osnovu javno dostupnih izvora, uz jasno navođenje referenci…
  </p>
  <p class="mt-3">
    Fotografije su sopstvene ili sa platformi otvorenih licenci
    (npr. <a class="accent-text hover:underline" href="https://commons.wikimedia.org" target="_blank" rel="noopener">Wikimedia Commons</a>).
  </p>
</section>

<script type="module">
  // koristi helper iz app.js (global scope), ako je u modulu, možeš kopirati isti kod refsRenderList
  const refsBox = document.querySelector('#refs-global .content');
  const byBox = document.querySelector('#refs-by-m .content');

  const refs = await fetch('data/references.json').then(r=>r.json()).catch(()=>({global:[],monasteries:{}}));
  const list = (arr=[]) => (arr.length
    ? `<ul class="list-disc pl-6 space-y-1">${
        arr.map(r=>`<li><a class="ref-link" href="${r.url||'#'}" target="_blank" rel="noopener">${r.title||'Izvor'}</a>${r.note?` <span class="text-gray-500 text-sm">— ${r.note}</span>`:''}</li>`).join('')
      }</ul>`
    : '<p class="text-gray-500">Nema unetih referenci.</p>');

  refsBox.innerHTML = list(refs.global || []);
  const monk = refs.monasteries || {};
  if (!Object.keys(monk).length) {
    byBox.innerHTML = '<p class="text-gray-500">Još uvek nismo dodali pojedinačne izvore po manastirima.</p>';
  } else {
    byBox.innerHTML = Object.entries(monk).map(([slug, arr]) => `
      <div class="border-t pt-4 mt-4">
        <h3 class="font-semibold accent-text mb-2">${slug.charAt(0).toUpperCase()+slug.slice(1)}</h3>
        ${list(arr)}
      </div>
    `).join('');
  }
</script>
